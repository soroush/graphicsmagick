%!PS-Adobe-3.0
%%Creator: groff version 1.10
%%CreationDate: Sat Sep 19 13:41:02 1998
%%DocumentNeededResources: font Times-Roman
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Symbol
%%DocumentSuppliedResources: procset grops 1.10 0
%%Pages: 4
%%PageOrder: Ascend
%%Orientation: Portrait
%%EndComments
%%BeginProlog
%%BeginResource: procset grops 1.10 0
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}bind def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/FL{
currentgray exch setgray fill setgray
}bind def
/BL/fill load def
/LW/setlinewidth load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
}bind def
/PEND{
clear
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%IncludeResource: font Times-Roman
%%IncludeResource: font Times-Bold
%%IncludeResource: font Times-Italic
%%IncludeResource: font Symbol
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Times-Italic@0 ENC0/Times-Italic RE/Times-Bold@0 ENC0/Times-Bold RE
/Times-Roman@0 ENC0/Times-Roman RE
%%EndProlog
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(De)72 48 Q(vice Dri)-.25 E -.15(ve)-.25 G 2.5
(rI).15 G(nterf)-2.5 E 316.872(aces quantize)-.1 F 1.666(\(9\))1.666 G
/F1 9/Times-Bold@0 SF -.18(NA)72 96 S(ME).18 E F0
(Quantize - ImageMagick')108 108 Q 2.5(sc)-.55 G
(olor reduction algorithm.)-2.5 E F1(SYNOPSIS)72 124.8 Q/F2 10
/Times-Bold@0 SF(#include <magick.h>)108 136.8 Q F1(DESCRIPTION)72 153.6
Q F0(This document describes ho)108 165.6 Q(w)-.25 E F2(ImageMagick)2.5
E F0(performs color reduction on an image.)2.5 E 1.6 -.8(To f)5 H
(ully understand).8 E(this document, you should ha)108 177.6 Q .3 -.15
(ve a k)-.2 H(no).15 E
(wledge of basic imaging techniques and the tree data structure and)-.25
E(terminology)108 189.6 Q(.)-.65 E -.15(Fo)108 213.6 S 2.5(rp).15 G
(urposes of color allocation, an image is a set of)-2.5 E/F3 10
/Times-Italic@0 SF(n)2.5 E F0(pix)2.5 E(els, where each pix)-.15 E
(el is a point in RGB space.)-.15 E(RGB space is a 3-dimensional v)108
225.6 Q(ector space, and each pix)-.15 E(el,)-.15 E F3(p)2.5 E/F4 7
/Times-Italic@0 SF(i)5 I F0 5(,i)-5 K 2.5(sd)-5 G
(e\214ned by an ordered triple of red, green,)-2.5 E
(and blue coordinates, \()108 237.6 Q F3(r)A F4(i)5 I F3 2.5(,g)-5 K F4
(i)-2.5 5 M F3 2.5(,b)-5 K F4(i)-2.5 5 M F0(\).)-5 I(Each primary color\
 component \(red, green, or blue\) represents an intensity which v)108
261.6 Q(aries linearly from 0 to a)-.25 E(maximum v)108 273.6 Q(alue,)
-.25 E F3(c)2.5 E F4(max)5 I F0 2.5(,w)-5 K
(hich corresponds to full saturation of that color)-2.5 E 5(.C)-.55 G
(olor allocation is de\214ned o)-5 E -.15(ve)-.15 G 2.5(ra).15 G
(domain consisting of the cube in RGB space with opposite v)108 285.6 Q
(ertices at \(0,0,0\) and \()-.15 E F3(c)A F4(max)5 I F3(,c)-5 I F4(max)
5 I F3(,c)-5 I F4(max)5 I F0(\).)-5 I F2(ImageMagick)108 297.6 Q F0
(requires)2.5 E F3(c)2.5 E F4(max)5 I F3 2.5(=2)2.5 -5 O(55)-2.5 E F0(.)
A(The algorithm maps this domain onto a tree in which each node represe\
nts a cube within that domain.)108 321.6 Q(In)5 E(the follo)108 333.6 Q
(wing discussion, these cubes are de\214ned by the coordinate of tw)-.25
E 2.5(oo)-.1 G(pposite v)-2.5 E(ertices: The v)-.15 E(erte)-.15 E(x)-.15
E(nearest the origin in RGB space and the v)108 345.6 Q(erte)-.15 E 2.5
(xf)-.15 G(arthest from the origin.)-2.6 E(The tree')108 369.6 Q 2.5(sr)
-.55 G(oot node represents the the entire domain, \(0,0,0\) through \()
-2.5 E F3(c)A F4(max)5 I F3(,c)-5 I F4(max)5 I F3(,c)-5 I F4(max)5 I F0
2.5(\). Each)-5 J(lo)2.5 E(wer le)-.25 E -.15(ve)-.25 G 2.5(li).15 G(n)
-2.5 E(the tree is generated by subdi)108 381.6 Q(viding one node')-.25
E 2.5(sc)-.55 G(ube into eight smaller cubes of equal size.)-2.5 E(This)
5 E(corresponds to bisecting the parent cube with planes passing throug\
h the midpoints of each edge.)108 393.6 Q
(The basic algorithm operates in three phases:)108 417.6 Q F2
(Classi\214cation, Reduction)5 E F0 2.5(,a)C(nd)-2.5 E F2(Assignment)2.5
E F0(.)A F2(Classi\214cation)5 E F0 -.2(bu)108 429.6 S
(ilds a color description tree for the image.).2 E F2(Reduction)5 E F0
(collapses the tree until the number it represents, at)2.5 E
(most, is the number of colors desired in the output image.)108 441.6 Q
F2(Assignment)5 E F0(de\214nes the output image')2.5 E 2.5(sc)-.55 G
(olor)-2.5 E(map and sets each pix)108 453.6 Q(el')-.15 E 2.5(sc)-.55 G
(olor by reclassi\214cation in the reduced tree. Our goal is to minimiz\
e the)-2.5 E(numerical discrepancies between the original colors and qu\
antized colors.)108 465.6 Q 1.6 -.8(To l)5 H(earn more about).8 E
(quantization error)108 477.6 Q 2.5(,s)-.4 G
(ee MEASURING COLOR REDUCTION ERR)-2.5 E(OR later in this document.)-.4
E F2(Classi\214cation)108 501.6 Q F0(be)2.5 E
(gins by initializing a color description tree of suf)-.15 E
(\214cient depth to represent each possible)-.25 E
(input color in a leaf.)108 513.6 Q(Ho)5 E(we)-.25 E -.15(ve)-.25 G .8
-.4(r, i).15 H 2.5(ti).4 G 2.5(si)-2.5 G
(mpractical to generate a fully-formed color description tree in the)
-2.5 E(classi\214cation phase for realistic v)108 525.6 Q(alues of)-.25
E F3(c)2.5 E F4(max)5 I F0 5(.I)-5 K 2.5(fc)-5 G
(olor components in the input image are quantized to)-2.5 E F3(k)2.5 E
F0(-)A(bit precision, so that)108 537.6 Q F3(c)2.5 E F4(max)5 I F3 2.5
(=2)2.5 -5 O F4(k)-2.5 -5 M F3(-1)5 I F0 2.5(,t)C(he tree w)-2.5 E
(ould need)-.1 E F3(k)2.5 E F0(le)2.5 E -.15(ve)-.25 G(ls belo).15 E 2.5
(wt)-.25 G(he root node to allo)-2.5 E 2.5(wr)-.25 G(epresenting)-2.5 E
(each possible input color in a leaf.)108 549.6 Q
(This becomes prohibiti)5 E .3 -.15(ve b)-.25 H(ecause the tree').15 E
2.5(st)-.55 G(otal number of nodes is)-2.5 E/F5 16/Symbol SF(S)140 573.6
Q/F6 7/Times-Roman@0 SF(k)1.75 -8 M(i=1)7 I/F7 16/Times-Roman@0 SF(8k)4
E F0 2.5(Ac)108 590.4 S(omplete tree w)-2.5 E
(ould require 19,173,961 nodes for)-.1 E F3 2.5(k=8)2.5 G 2.5(,c)-2.5 G
F4(max)-2.5 5 M F3 2.5(=2)2.5 -5 O(55)-2.5 E F0 5(.T)C(herefore, to a)-5
E -.2(vo)-.2 G(id b).2 E(uilding a fully)-.2 E(populated tree,)108 602.4
Q F2(ImageMagick)2.5 E F0 2.5(:\()C
(1\) Initializes data structures for nodes only as the)-2.5 E 2.5(ya)
-.15 G(re needed; \(2\) Chooses)-2.5 E 2.5(am)108 614.4 S(aximum depth \
for the tree as a function of the desired number of colors in the outpu\
t image \(currently)-2.5 E F3(lo)108 626.4 Q(g)-.1 E F4(4)5 I F3
(\(colormap size\)+2)-5 I F0 2.5(\). A)B
(tree of this depth generally allo)2.5 E
(ws the best representation of the source image)-.25 E(with the f)108
638.4 Q(astest computational speed and the least amount of memory)-.1 E
5(.H)-.65 G -.25(ow)-5 G -2.15 -.25(ev e).25 H .8 -.4(r, t).25 H(he def)
.4 E(ault depth is)-.1 E(inappropriate for some images.)108 650.4 Q
(Therefore, the caller can request a speci\214c tree depth.)5 E -.15(Fo)
108 674.4 S 2.5(re).15 G(ach pix)-2.5 E
(el in the input image, classi\214cation scans do)-.15 E(wnw)-.25 E
(ard from the root of the color description tree.)-.1 E(At each le)108
686.4 Q -.15(ve)-.25 G 2.5(lo).15 G 2.5(ft)-2.5 G(he tree, it identi\
\214es the single node which represents a cube in RGB space containing \
the)-2.5 E(pix)108 698.4 Q(el')-.15 E 2.5(sc)-.55 G(olor)-2.5 E 5(.I)
-.55 G 2.5(tu)-5 G(pdates the follo)-2.5 E
(wing data for each such node:)-.25 E F2(n)108 715.2 Q/F8 7/Times-Bold@0
SF(1)5 I F2(:)-5 I F0(Number of pix)23.61 E(els whose color is containe\
d in the RGB cube which this node represents;)-.15 E 125.135
(ImageMagick Last)72 768 R(change: 1 May 1994)2.5 E(1)178.175 E EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(De)72 48 Q(vice Dri)-.25 E -.15(ve)-.25 G 2.5
(rI).15 G(nterf)-2.5 E 316.872(aces quantize)-.1 F 1.666(\(9\))1.666 G
/F1 10/Times-Bold@0 SF(n)108 96 Q/F2 7/Times-Bold@0 SF(2)5 I F1(:)-5 I
F0(Number of pix)23.61 E
(els whose color is not represented in a node at lo)-.15 E
(wer depth in the tree;)-.25 E(initially)5 E(,)-.65 E/F3 10
/Times-Italic@0 SF(n)5 E/F4 7/Times-Italic@0 SF(2)5 I F3 2.5(=0)144 108
S F0(for all nodes e)A(xcept lea)-.15 E -.15(ve)-.2 G 2.5(so).15 G 2.5
(ft)-2.5 G(he tree.)-2.5 E F1(S)108 124.8 Q F2(r)5 I F1 2.5(,S)-5 K F2
(g)-2.5 5 M F1 2.5(,S)-5 K F2(b)-2.5 5 M F1(:)-5 I F0
(Sums of the red, green, and blue component v)144 136.8 Q
(alues for all pix)-.25 E(els not classi\214ed at a lo)-.15 E
(wer depth.)-.25 E(The combination of these sums and)144 148.8 Q F3(n)
2.5 E F4(2)5 I F0
(will ultimately characterize the mean color of a set of pix)2.5 -5 M
(els)-.15 E(represented by this node.)144 160.8 Q F1(E:)108 177.6 Q F0
(The distance squared in RGB space between each pix)26 E
(el contained within a node and the nodes')-.15 E(center)144 189.6 Q 5
(.T)-.55 G(his represents the quantization error for a node.)-5 E F1
(Reduction)108 206.4 Q F0
(repeatedly prunes the tree until the number of nodes with)2.5 E F3(n)
2.5 E F4(2)5 I F3 2.5(>0)5 -5 O F0(is less than or equal to the)A
(maximum number of colors allo)108 218.4 Q(wed in the output image.)-.25
E(On an)5 E 2.5(yg)-.15 G -2.15 -.25(iv e)-2.5 H 2.5(ni).25 G
(teration o)-2.5 E -.15(ve)-.15 G 2.5(rt).15 G(he tree, it selects)-2.5
E(those nodes whose)108 230.4 Q F3(E)2.5 E F0 -.25(va)2.5 G
(lue is minimal for pruning and mer).25 E
(ges their color statistics upw)-.18 E 2.5(ard. It)-.1 F(uses a)2.5 E
(pruning threshold,)108 242.4 Q F3(E)2.5 E F4(p)5 I F0 2.5(,t)-5 K 2.5
(og)-2.5 G -.15(ove)-2.5 G(rn node selection as follo).15 E(ws:)-.25 E
(E)113 266.4 Q/F5 7/Times-Roman@0 SF(p)5 I F0 2.5(=0)2.5 -5 O
(while number of nodes with \(n)113 278.4 Q F5(2)5 I F0 2.5(>0)2.5 -5 O
2.5(\)>r)-2.5 G(equired maximum number of colors)-2.5 E
(prune all nodes such that E <= E)123 290.4 Q F5(p)5 I F0(Set E)123
302.4 Q F5(p)5 I F0(to minimum E in remaining nodes)5 -5 M
(This has the ef)108 326.4 Q(fect of minimizing an)-.25 E 2.5(yq)-.15 G
(uantization error when mer)-2.5 E(ging tw)-.18 E 2.5(on)-.1 G
(odes together)-2.5 E(.)-.55 E(When a node to be pruned has of)108 350.4
Q(fspring, the pruning procedure in)-.25 E -.2(vo)-.4 G -.1(ke).2 G 2.5
(si).1 G(tself recursi)-2.5 E -.15(ve)-.25 G(ly in order to prune).15 E
(the tree from the lea)108 362.4 Q -.15(ve)-.2 G 2.5(su).15 G(pw)-2.5 E
2.5(ard. The)-.1 F -.25(va)2.5 G(lues of).25 E F3(n)2.5 E F4(2)5 I F3(S)
5 -5 M F4(r)5 I F3 2.5(,S)-5 K F4(g)-2.5 5 M F3(,)-5 I F0(and)5 E F3(S)
2.5 E F4(b)5 I F0(in a node being pruned are al)2.5 -5 M -.1(wa)-.1 G
(ys added).1 E(to the corresponding data in that node')108 374.4 Q 2.5
(sp)-.55 G 2.5(arent. This)-2.5 F(retains the pruned node')2.5 E 2.5(sc)
-.55 G(olor characteristics for later)-2.5 E -2.25 -.2(av e)108 386.4 T
(raging.).2 E -.15(Fo)108 410.4 S 2.5(re).15 G(ach node,)-2.5 E F3(n)5 E
F4(2)5 I F0(pix)2.5 -5 M(els e)-.15 E
(xist for which that node represents the smallest v)-.15 E
(olume in RGB space containing)-.2 E(those pix)108 422.4 Q(el')-.15 E
2.5(sc)-.55 G 2.5(olors. When)-2.5 F F3(n)2.5 E F4(2)5 I F3 2.5(>0)5 -5
O F0(the node will uniquely de\214ne a color in the output image.)A
(At the)5 E(be)108 434.4 Q(ginning of reduction,)-.15 E F3(n)2.5 E F4(2)
5 I F3 2.5(=0)2.5 -5 O F0(for all nodes e)2.5 E(xcept the lea)-.15 E
-.15(ve)-.2 G 2.5(so).15 G 2.5(ft)-2.5 G
(he tree which represent colors present in)-2.5 E(the input image.)108
446.4 Q(The other pix)108 470.4 Q(el count,)-.15 E F3(n)2.5 E F4(1)5 I
F0 5(,i)-5 K(ndicates the total number of colors within the cubic v)-5 E
(olume which the node)-.2 E 2.5(represents. This)108 482.4 R(includes)
2.5 E F3(n)2.5 E F4(1)5 I F3 2.5(-n)2.5 -5 O F4(2)-2.5 5 M F0(pix)2.5 -5
M(els whose colors should be de\214ned by nodes at a lo)-.15 E(wer le)
-.25 E -.15(ve)-.25 G 2.5(li).15 G 2.5(nt)-2.5 G(he tree.)-2.5 E F1
(Assignment)108 506.4 Q F0
(generates the output image from the pruned tree.)2.5 E
(The output image consists of tw)5 E 2.5(op)-.1 G 2.5(arts: \(1\))-2.5 F
2.5(Ac)108 518.4 S(olor map, which is an array of color descriptions \(\
RGB triples\) for each color present in the output)-2.5 E(image; \(2\))
108 530.4 Q 2.5(Ap)5 G(ix)-2.5 E(el array)-.15 E 2.5(,w)-.65 G
(hich represents each pix)-2.5 E(el as an inde)-.15 E 2.5(xi)-.15 G
(nto the color map array)-2.5 E(.)-.65 E
(First, the assignment phase mak)108 554.4 Q(es one pass o)-.1 E -.15
(ve)-.15 G 2.5(rt).15 G
(he pruned color description tree to establish the image')-2.5 E(s)-.55
E(color map.)108 566.4 Q -.15(Fo)5 G 2.5(re).15 G(ach node with)-2.5 E
F3(n)2.5 E F4(2)5 I F3 2.5(>0)2.5 -5 O F0 2.5(,i)-2.5 G 2.5(td)-2.5 G
-.25(iv)-2.5 G(ides).25 E F3(S)2.5 E F4(r)5 I F3 2.5(,S)-5 K F4(g)-2.5 5
M F0 2.5(,a)-5 K(nd)-2.5 E F3(S)2.5 E F4(b)5 I F0(by)2.5 -5 M F3(n)2.5 E
F4(2)5 I F0 5(.T)-5 K(his produces the mean color of all)-5 E(pix)108
578.4 Q(els that classify no lo)-.15 E(wer than this node.)-.25 E
(Each of these colors becomes an entry in the color map.)5 E(Finally)108
602.4 Q 2.5(,t)-.65 G(he assignment phase reclassi\214es each pix)-2.5 E
(el in the pruned tree to identify the deepest node)-.15 E
(containing the pix)108 614.4 Q(el')-.15 E 2.5(sc)-.55 G(olor)-2.5 E 5
(.T)-.55 G(he pix)-5 E(el')-.15 E 2.5(sv)-.55 G(alue in the pix)-2.75 E
(el array becomes the inde)-.15 E 2.5(xo)-.15 G 2.5(ft)-2.5 G(his node')
-2.5 E 2.5(sm)-.55 G(ean)-2.5 E(color in the color map.)108 626.4 Q
(Empirical e)108 650.4 Q
(vidence suggests that distances in color spaces such as YUV)-.25 E 2.5
(,o)-1.29 G 2.5(rY)-2.5 G(IQ correspond to perceptual)-2.5 E(color dif)
108 662.4 Q(ferences more closely than do distances in RGB space.)-.25 E
(These color spaces may gi)5 E .3 -.15(ve b)-.25 H(etter results).15 E
(when color reducing an image.)108 674.4 Q
(Here the algorithm is as described e)5 E(xcept each pix)-.15 E
(el is a point in the)-.15 E(alternate color space.)108 686.4 Q -.15(Fo)
5 G 2.5(rc).15 G(on)-2.5 E -.15(ve)-.4 G(nience, the color components a\
re normalized to the range 0 to a maximum).15 E -.25(va)108 698.4 S
(lue,).25 E F3(c)2.5 E F4(max)5 I F0 5(.T)-5 K
(he color reduction can then proceed as described.)-5 E 125.135
(ImageMagick Last)72 768 R(change: 1 May 1994)2.5 E(2)178.175 E EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(De)72 48 Q(vice Dri)-.25 E -.15(ve)-.25 G 2.5
(rI).15 G(nterf)-2.5 E 316.872(aces quantize)-.1 F 1.666(\(9\))1.666 G
/F1 9/Times-Bold@0 SF(MEASURING COLOR REDUCTION ERR)72 96 Q(OR)-.27 E F0
(Depending on the image, the color reduction error may be ob)108 108 Q
(vious or in)-.15 E 2.5(visible. Images)-.4 F(with high spatial)2.5 E
(frequencies \(such as hair or grass\) will sho)108 120 Q 2.5(we)-.25 G
(rror much less than pictures with lar)-2.5 E(ge smoothly shaded areas)
-.18 E(\(such as f)108 132 Q 2.5(aces\). This)-.1 F
(is because the high-frequenc)2.5 E 2.5(yc)-.15 G
(ontour edges introduced by the color reduction)-2.5 E(process are mask)
108 144 Q(ed by the high frequencies in the image.)-.1 E 1.6 -.8(To m)
108 168 T(easure the dif).8 E(ference between the original and color re\
duced images \(the total color reduction error\),)-.25 E/F2 10
/Times-Bold@0 SF(ImageMagick)108 180 Q F0(sums o)2.5 E -.15(ve)-.15 G
2.5(ra).15 G(ll pix)-2.5 E(els in an image the distance squared in RGB \
space between each original)-.15 E(pix)108 192 Q(el v)-.15 E
(alue and its color reduced v)-.25 E(alue.)-.25 E F2(ImageMagick)2.5 E
F0(prints se)2.5 E -.15(ve)-.25 G(ral error measurements including the)
.15 E(mean error per pix)108 204 Q(el, the normalized mean error)-.15 E
2.5(,a)-.4 G(nd the normalized maximum error)-2.5 E(.)-.55 E
(The normalized error measurement can be used to compare images.)108 228
Q(In general, the closer the mean error is)5 E
(to zero the more the quantized image resembles the source image.)108
240 Q(Ideally)5 E 2.5(,t)-.65 G(he error should be perceptually-)-2.5 E
(based, since the human e)108 252 Q
(ye is the \214nal judge of quantization quality)-.15 E(.)-.65 E
(These errors are measured and printed when)108 276 Q F2(-v)2.5 E
(erbose)-.1 E F0(and)2.5 E F2(-colors)2.5 E/F3 10/Times-Italic@0 SF(ar)
2.5 E 2.5(es)-.37 G(peci\214ed on the command line:)-2.5 E F2(mean err)
108 292.8 Q(or per pixel:)-.18 E F0(is the mean error for an)144 304.8 Q
2.5(ys)-.15 G(ingle pix)-2.5 E(el in the image.)-.15 E F2
(normalized mean squar)108 321.6 Q 2.5(ee)-.18 G(rr)-2.5 E(or:)-.18 E F0
(is the normalized mean square quantization error for an)144 333.6 Q 2.5
(ys)-.15 G(ingle pix)-2.5 E(el in the image.)-.15 E
(This distance measure is normalized to a range between 0 and 1.)144
357.6 Q(It is independent of the range of)5 E(red, green, and blue v)144
369.6 Q(alues in the image.)-.25 E F2(normalized maximum squar)108 386.4
Q 2.5(ee)-.18 G(rr)-2.5 E(or:)-.18 E F0(is the lar)144 398.4 Q
(gest normalized square quantization error for an)-.18 E 2.5(ys)-.15 G
(ingle pix)-2.5 E(el in the image.)-.15 E
(This distance measure is normalized to a range between 0 and 1.)144
422.4 Q(It is independent of the range of)5 E(red, green, and blue v)144
434.4 Q(alues in the image.)-.25 E F1 1.5(SEE ALSO)72 451.2 R F2
(display\(1\), animate\(1\), mogrify\(1\), import\(1\), miff\(5\))108
463.2 Q F1(COPYRIGHT)72 480 Q F0(Cop)108 492 Q
(yright 1998 E. I. du Pont de Nemours and Compan)-.1 E(y)-.15 E
(Permission is hereby granted, free of char)108 516 Q(ge, to an)-.18 E
2.5(yp)-.15 G(erson obtaining a cop)-2.5 E 2.5(yo)-.1 G 2.5(ft)-2.5 G
(his softw)-2.5 E(are and associated)-.1 E(documentation \214les \("Ima\
geMagick"\), to deal in ImageMagick without restriction, including with\
out)108 528 Q(limitation the rights to use, cop)108 540 Q 1.3 -.65(y, m)
-.1 H(odify).65 E 2.5(,m)-.65 G(er)-2.5 E(ge, publish, distrib)-.18 E
(ute, sublicense, and/or sell copies of)-.2 E(ImageMagick, and to permi\
t persons to whom the ImageMagick is furnished to do so, subject to the)
108 552 Q(follo)108 564 Q(wing conditions:)-.25 E(The abo)108 588 Q .3
-.15(ve c)-.15 H(op).15 E(yright notice and this permission notice shal\
l be included in all copies or substantial portions)-.1 E
(of ImageMagick.)108 600 Q(The softw)108 624 Q(are is pro)-.1 E
(vided "as is", without w)-.15 E(arranty of an)-.1 E 2.5(yk)-.15 G
(ind, e)-2.5 E(xpress or implied, including b)-.15 E(ut not limited)-.2
E(to the w)108 636 Q(arranties of merchantability)-.1 E 2.5<2c8c>-.65 G
(tness for a particular purpose and noninfringement.)-2.5 E(In no e)5 E
-.15(ve)-.25 G(nt shall).15 E(E. I. du Pont de Nemours and Compan)108
648 Q 2.5(yb)-.15 G 2.5(el)-2.5 G(iable for an)-2.5 E 2.5(yc)-.15 G
(laim, damages or other liability)-2.5 E 2.5(,w)-.65 G(hether in an)-2.5
E(action of contract, tort or otherwise, arising from, out of or in con\
nection with ImageMagick or the use or)108 660 Q
(other dealings in ImageMagick.)108 672 Q(Except as contained in this n\
otice, the name of the E. I. du Pont de Nemours and Compan)108 696 Q 2.5
(ys)-.15 G(hall not be)-2.5 E(used in adv)108 708 Q(ertising or otherwi\
se to promote the sale, use or other dealings in ImageMagick without pr\
ior)-.15 E
(written authorization from the E. I. du Pont de Nemours and Compan)108
720 Q -.65(y.)-.15 G 125.135(ImageMagick Last)72 768 R
(change: 1 May 1994)2.5 E(3)178.175 E EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(De)72 48 Q(vice Dri)-.25 E -.15(ve)-.25 G 2.5
(rI).15 G(nterf)-2.5 E 316.872(aces quantize)-.1 F 1.666(\(9\))1.666 G
/F1 9/Times-Bold@0 SF -.495(AC)72 96 S(KNO).495 E(WLEDGEMENTS)-.45 E F0
-.15(Pa)108 108 S(ul Ra).15 E -.15(ve)-.2 G(ling, USC Information Scien\
ces Institute, for the original idea of using space subdi).15 E
(vision for the)-.25 E(color reduction algorithm.)108 120 Q -.4(Wi)5 G
(th P).4 E(aul')-.15 E 2.5(sp)-.55 G
(ermission, this document is an adaptation from a document he)-2.5 E
(wrote.)108 132 Q F1 -.45(AU)72 148.8 S(THORS).45 E F0(John Cristy)108
160.8 Q 2.5(,E)-.65 G(.I. du Pont de Nemours and Compan)-2.5 E 2.5(yI)
-.15 G(ncorporated)-2.5 E 125.135(ImageMagick Last)72 768 R
(change: 1 May 1994)2.5 E(4)178.175 E EP
%%Trailer
end
%%EOF
