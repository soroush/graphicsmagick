
all:	man tex html

man:	gm-$(UTILITY).1

html:	gm-$(UTILITY).html

tex:	gm-$(UTILITY).tex

brief_options.imdoc:	options.imdoc
	imdoc_select_brief options.imdoc brief_options.imdoc

gm-$(UTILITY)/Expanded.imdoc: $(UTILITY).imdoc brief_options.imdoc copyright.imdoc
	imdocinclude $(UTILITY).imdoc > gm-$(UTILITY)/Expanded.imdoc

gm-$(UTILITY)/man.imdoc: gm-$(UTILITY)/Expanded.imdoc
	gmdocselect $(UTILITY) man gm-$(UTILITY)/Expanded.imdoc > \
	gm-$(UTILITY)/man.imdoc

gm-$(UTILITY)/html.imdoc: gm-$(UTILITY)/Expanded.imdoc
	gmdocselect $(UTILITY) html gm-$(UTILITY)/Expanded.imdoc > \
	gm-$(UTILITY)/html.imdoc

gm-$(UTILITY)/tex.imdoc: gm-$(UTILITY)/Expanded.imdoc
	gmdocselect $(UTILITY) tex gm-$(UTILITY)/Expanded.imdoc > \
	gm-$(UTILITY)/tex.imdoc

gm-$(UTILITY).1:  gm-$(UTILITY)/man.imdoc
	imdoc2man $(UTILITY) gm-$(UTILITY)/man.imdoc > gm-$(UTILITY).1

gm-$(UTILITY).html:  gm-$(UTILITY)/html.imdoc
	gmdoc2html $(UTILITY) gm-$(UTILITY)/html.imdoc > gm-$(UTILITY).html

gm-$(UTILITY).tex:  gm-$(UTILITY)/tex.imdoc
	imdoc2tex < gm-$(UTILITY)/tex.imdoc > gm-$(UTILITY).tex

install: www/gm-$(UTILITY).html utilities/gm-$(UTILITY).1

www/gm-$(UTILITY).html: gm-$(UTILITY).html
	cp gm-$(UTILITY).html gm-www/$(UTILITY).html

utilities/gm-$(UTILITY).1: gm-$(UTILITY).1
	cp gm-$(UTILITY).1 utilities/gm-$(UTILITY).1

clean:
	/bin/rm -f gm-$(UTILITY).1 gm-$(UTILITY).html gm-$(UTILITY).tex gm-$(UTILITY)/*
	/bin/rm -f www/gm-$(UTILITY).html utilities/gm-$(UTILITY).1
