<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.13.1: http://docutils.sourceforge.net/" />
<title></title>
<link rel="stylesheet" href="docutils-articles.css" type="text/css" />
</head>
<body>

<div class="banner">
<img src="images/gm-107x76.png" alt="GraphicMagick logo" width="107" height="76" />
<span class="title">GraphicsMagick</span>
<form action="http://www.google.com/search">
	<input type="hidden" name="domains" value="www.graphicsmagick.org" />
	<input type="hidden" name="sitesearch" value="www.graphicsmagick.org" />
    <span class="nowrap"><input type="text" name="q" size="25" maxlength="255" />&nbsp;<input type="submit" name="sa" value="Search" /></span>
</form>
</div>

<div class="navmenu">
<ul>
<li><a href="index.html">Home</a></li>
<li><a href="project.html">Project</a></li>
<li><a href="download.html">Download</a></li>
<li><a href="README.html">Install</a></li>
<li><a href="Hg.html">Source</a></li>
<li><a href="NEWS.html">News</a> </li>
<li><a href="utilities.html">Utilities</a></li>
<li><a href="programming.html">Programming</a></li>
<li><a href="reference.html">Reference</a></li>
</ul>
</div>
<div class="document">


<p>2019-02-24  Bob Friesenhahn  &lt;<a class="reference external" href="mailto:bfriesen&#37;&#52;&#48;simple&#46;dallas&#46;tx&#46;us">bfriesen<span>&#64;</span>simple<span>&#46;</span>dallas<span>&#46;</span>tx<span>&#46;</span>us</a>&gt;</p>
<blockquote>
<ul class="simple">
<li>magick/image-private.h (_ImageExtra): Put ImageExtra definition
in a private header file so that its definition may be accessed
directly by library internals.  Add some accessor macros to
provide access and update code to use them.</li>
<li>coders/wpg.c (ReallocColormap): Make sure that there is not a
heap overwrite if the number of colors has been reduced.  Thanks
to Jaroslav Fojtik for giving me a heads up about this.</li>
</ul>
</blockquote>
<p>2019-02-23  Bob Friesenhahn  &lt;<a class="reference external" href="mailto:bfriesen&#37;&#52;&#48;simple&#46;dallas&#46;tx&#46;us">bfriesen<span>&#64;</span>simple<span>&#46;</span>dallas<span>&#46;</span>tx<span>&#46;</span>us</a>&gt;</p>
<blockquote>
<ul class="simple">
<li>magick/monitor.c (MagickMonitorActive): Add new private function
to test if a progress monitor is active.  Update all progress
monitor code in loops to use this information, while also updating
code to hopefully address concerns expressed by Hongxu Chen about
data races on the graphicsmagick-bugs mailing list starting on
February 6, 2019.</li>
</ul>
</blockquote>
<p>2019-02-21  Bob Friesenhahn  &lt;<a class="reference external" href="mailto:bfriesen&#37;&#52;&#48;simple&#46;dallas&#46;tx&#46;us">bfriesen<span>&#64;</span>simple<span>&#46;</span>dallas<span>&#46;</span>tx<span>&#46;</span>us</a>&gt;</p>
<blockquote>
<ul class="simple">
<li>coders/mpc.c (ReadMPCImage): Tally directory length to avoid
death by strlen().</li>
<li>coders/miff.c (ReadMIFFImage): Tally directory length to avoid
death by strlen().  Fixes oss-fuzz 13190
&quot;graphicsmagick/coder_MIFF_fuzzer: Timeout in
graphicsmagick_coder_MIFF_fuzzer&quot;. (Credit to OSS-Fuzz)</li>
</ul>
</blockquote>
<p>2019-02-17  Bob Friesenhahn  &lt;<a class="reference external" href="mailto:bfriesen&#37;&#52;&#48;simple&#46;dallas&#46;tx&#46;us">bfriesen<span>&#64;</span>simple<span>&#46;</span>dallas<span>&#46;</span>tx<span>&#46;</span>us</a>&gt;</p>
<blockquote>
<ul class="simple">
<li>coders/svg.c (ReadSVGImage): Don't call xmlCleanupParser()
in module code since this may cause other libxml users to fail.</li>
<li>coders/msl.c (ProcessMSLScript): Don't call xmlCleanupParser()
in module code since this may cause other libxml users to fail.</li>
<li>magick/render.c (DrawDashPolygon): (DrawDashPolygon): Don't read
beyond end of dash pattern array.  This is a second instance of
issue identified by SourceForge issue #591.  Fixes oss-fuzz 13160
&quot;graphicsmagick/coder_MVG_fuzzer: Heap-buffer-overflow in
DrawDashPolygon&quot;.  The earlier attempt to fix this problem today
broke dash patterns entirely.  (Credit to OSS-Fuzz)</li>
<li>magick/annotate.c (RenderFreetype): Eliminate memory leak of
GlyphInfo.image (type FT_Glyph) while rendering some FreeType
fonts such as the one we use now in the Magick++ test suite.</li>
</ul>
</blockquote>
<p>2019-02-16  Bob Friesenhahn  &lt;<a class="reference external" href="mailto:bfriesen&#37;&#52;&#48;simple&#46;dallas&#46;tx&#46;us">bfriesen<span>&#64;</span>simple<span>&#46;</span>dallas<span>&#46;</span>tx<span>&#46;</span>us</a>&gt;</p>
<blockquote>
<ul class="simple">
<li>magick/render.c (DrawDashPolygon): Avoid reading one beyond
length of dash pattern array, which is terminated by value 0.0.
Fixes SourceForge issue #591 &quot;Heap buffer overflow in
DrawDashPolygon when parsing SVG images&quot;.
(DrawPrimitive): Add arithmetic overflow checks when converting
computed coordinates from 'double' to 'long'.
(DrawImage): Don't destroy draw_info in graphic_context when
draw_info has not been allocated yet.  Problem reported via email
by Sami Supperi on Thu, 14 Feb 2019.</li>
<li>coders/jpeg.c (ReadJPEGImage): JPEG files are observed to
provide compression ratios as high as 2500 so allow for that.
Also, the test for &quot;Unreasonable dimensions&quot; delivered yesterday
was flawed since magick_rows and magick_columns are only set if a
desired image size was provided.  Fixes SourceForge issue 592
&quot;Non-malicious JPEG file fails with &quot;Unreasonable dimensions&quot;&quot;.</li>
<li>coders/tiff.c (ReadTIFFImage): Only disassociate alpha channel
for images where photometic is PHOTOMETRIC_RGB. Fixes oss-fuzz
13115 &quot;graphicsmagick/coder_PTIF_fuzzer:
Use-of-uninitialized-value in DisassociateAlphaRegion&quot;. (Credit to
OSS-Fuzz)</li>
</ul>
</blockquote>
<p>2019-02-15  Bob Friesenhahn  &lt;<a class="reference external" href="mailto:bfriesen&#37;&#52;&#48;simple&#46;dallas&#46;tx&#46;us">bfriesen<span>&#64;</span>simple<span>&#46;</span>dallas<span>&#46;</span>tx<span>&#46;</span>us</a>&gt;</p>
<blockquote>
<ul class="simple">
<li>coders/jpeg.c (ReadJPEGImage): Base test for &quot;Unreasonable
dimensions&quot; on original JPEG dimensions and not the scaled
dimensions.  Fixes SourceForge issue 593 &quot;gm convert: Insufficient
image data in file when hinting input image&quot;.</li>
</ul>
</blockquote>
<p>2019-02-13  Troy Patteson  &lt;<a class="reference external" href="mailto:troyp&#37;&#52;&#48;ieee&#46;org">troyp<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</p>
<blockquote>
<ul class="simple">
<li>PerlMagick/Magick.xs (Mogrify): Add decorate argument to Annotate.</li>
<li>PerlMagick/Magick.xs (Mogrify): Remove reference to undefined
Annotate argument.</li>
</ul>
</blockquote>
<p>2019-02-12  Bob Friesenhahn  &lt;<a class="reference external" href="mailto:bfriesen&#37;&#52;&#48;simple&#46;dallas&#46;tx&#46;us">bfriesen<span>&#64;</span>simple<span>&#46;</span>dallas<span>&#46;</span>tx<span>&#46;</span>us</a>&gt;</p>
<blockquote>
<ul class="simple">
<li>coders/tiff.c (ReadTIFFImage): For planar TIFF, make sure that
pixels are initialized in case some planes are missing.  Fixes
oss-fuzz 13046 &quot;graphicsmagick/coder_PTIF_fuzzer:
Use-of-uninitialized-value in DisassociateAlphaRegion&quot;. (Credit to
OSS-Fuzz)</li>
</ul>
</blockquote>
<p>2019-02-11  Bob Friesenhahn  &lt;<a class="reference external" href="mailto:bfriesen&#37;&#52;&#48;simple&#46;dallas&#46;tx&#46;us">bfriesen<span>&#64;</span>simple<span>&#46;</span>dallas<span>&#46;</span>tx<span>&#46;</span>us</a>&gt;</p>
<blockquote>
<ul class="simple">
<li>coders/pdf.c (WritePDFImage): Make sure to free 'xref' before
returning.  Similar to ImageMagick CVE-2019-7397 &quot;In ImageMagick
before 7.0.8-25, several memory leaks exist in WritePDFImage in
coders/pdf.c.&quot;.  Thanks to Petr Gajdos for bringing this issue to
our attention.</li>
</ul>
</blockquote>
<p>2019-02-10  Bob Friesenhahn  &lt;<a class="reference external" href="mailto:bfriesen&#37;&#52;&#48;simple&#46;dallas&#46;tx&#46;us">bfriesen<span>&#64;</span>simple<span>&#46;</span>dallas<span>&#46;</span>tx<span>&#46;</span>us</a>&gt;</p>
<blockquote>
<ul class="simple">
<li>coders/wpg.c (ReadWPGImage): Use a different way to reallocate
the colormap which preserves existing content, but also updates
image-&gt;colors and assures that added palette entries are
initialized.</li>
<li>coders/png.c (ReadMNGImage): Bound maximum loop iterations by
subrange as a primitive means of limiting resource consumption.
This should finally resolve oss-fuzz 12738
&quot;graphicsmagick/enhance_fuzzer: Out-of-memory in
graphicsmagick_enhance_fuzzer&quot;. (Credit to OSS-Fuzz)</li>
<li>coders/tiff.c (ReadTIFFImage): Assure that opacity channel is
initialized in the RGBAStrippedMethod case.  Convert
'CorruptImageError' encountered while testing for more frames to
'CorruptImageWarning' so we return the frames already read.
Second try at fixing oss-fuzz 11896
&quot;graphicsmagick/coder_PTIF_fuzzer: Use-of-uninitialized-value in
VerticalFilter&quot;.</li>
<li>coders/dpx.c (AttributeToString): Eliminate clang
&quot;-Wstring-plus-int&quot; warning observed in oss-fuzz build.</li>
<li>coders/cineon.c (AttributeToString): Eliminate clang
&quot;-Wstring-plus-int&quot; warning observed in oss-fuzz build.</li>
</ul>
</blockquote>
<p>2019-02-09  Bob Friesenhahn  &lt;<a class="reference external" href="mailto:bfriesen&#37;&#52;&#48;simple&#46;dallas&#46;tx&#46;us">bfriesen<span>&#64;</span>simple<span>&#46;</span>dallas<span>&#46;</span>tx<span>&#46;</span>us</a>&gt;</p>
<blockquote>
<ul class="simple">
<li>coders/pict.c (DecodeImage): Avoide a one-byte over-read of
pixels heap allocation.  The cause of the over-read is not yet
understood.  Fixes oss-fuzz 12019
&quot;graphicsmagick/coder_PICT_fuzzer: Heap-buffer-overflow in
ExpandBuffer&quot;. (Credit to OSS-Fuzz)</li>
<li>coders/wpg.c (ReadWPGImage): Assure that all colormap entries
are initialized.  Fixes oss-fuzz 12614
&quot;graphicsmagick/enhance_fuzzer: Use-of-uninitialized-value in
EnhanceImage&quot;. (Credit to OSS-Fuzz)</li>
<li>coders/tiff.c (ReadTIFFImage): Make sure that image is in
DirectClass mode and ignore any claimed colormap when the image is
read using the RGBAStrippedMethod, RGBATiledMethod, or
RGBAPuntMethod cases.  Fixes oss-fuzz 12195
&quot;graphicsmagick/coder_PTIF_fuzzer: Use-of-uninitialized-value in
ExportGrayQuantumType&quot;. (Credit to OSS-Fuzz)</li>
<li>coders/miff.c (ReadMIFFImage): Improve pixel buffer calculations
to defend against overflow.  Assure that zlib and bzlib decode the
expected number of bytes for a pixel row.  Fixes oss-fuzz issue
12448 &quot;graphicsmagick/coder_MIFF_fuzzer:
Use-of-uninitialized-value in RGBTransformPackets&quot;. (Credit to
OSS-Fuzz)</li>
</ul>
</blockquote>
<p>2019-02-08  Bob Friesenhahn  &lt;<a class="reference external" href="mailto:bfriesen&#37;&#52;&#48;simple&#46;dallas&#46;tx&#46;us">bfriesen<span>&#64;</span>simple<span>&#46;</span>dallas<span>&#46;</span>tx<span>&#46;</span>us</a>&gt;</p>
<blockquote>
<ul class="simple">
<li>coders/png.c (ReadMNGImage): Quit processing and report error
upon failure to insert MNG background layer.  Fixes oss-fuzz 12738
&quot;graphicsmagick/enhance_fuzzer: Out-of-memory in
graphicsmagick_enhance_fuzzer&quot;. (Credit to OSS-Fuzz)</li>
</ul>
</blockquote>
<p>2019-02-03  Bob Friesenhahn  &lt;<a class="reference external" href="mailto:bfriesen&#37;&#52;&#48;simple&#46;dallas&#46;tx&#46;us">bfriesen<span>&#64;</span>simple<span>&#46;</span>dallas<span>&#46;</span>tx<span>&#46;</span>us</a>&gt;</p>
<blockquote>
<ul class="simple">
<li>coders/dib.c (ReadDIBImage, WriteDIBImage): Improve buffer-size
calculations to guard against buffer overflows.  The reader
version was not as complete as it should have been, whereas the
writer version did not guard against arithmetic overflow at all.</li>
<li>coders/bmp.c (ReadBMPImage, WriteBMPImage): Improve buffer-size
calculations to guard against buffer overflows.  This is a
follow-on fix to the previous fix submitted for SourceForge issue
#582 &quot;heap-buffer-overflow in ReadBMPImage of bmp.c&quot; which is now
also identified as CVE-2018-20185.</li>
<li>www/Hg.rst: Updates to reflect current usage and availability.</li>
<li>www/authors.rst: Promote Troy Patteson to the active contributor
category.</li>
</ul>
</blockquote>
<p>2019-02-01  Bob Friesenhahn  &lt;<a class="reference external" href="mailto:bfriesen&#37;&#52;&#48;simple&#46;dallas&#46;tx&#46;us">bfriesen<span>&#64;</span>simple<span>&#46;</span>dallas<span>&#46;</span>tx<span>&#46;</span>us</a>&gt;</p>
<blockquote>
<ul class="simple">
<li>magick/version.h.in: Rotate ChangeLog and update copyright
statements for the new year.</li>
</ul>
</blockquote>
<p>2019-01-30  Bob Friesenhahn  &lt;<a class="reference external" href="mailto:bfriesen&#37;&#52;&#48;simple&#46;dallas&#46;tx&#46;us">bfriesen<span>&#64;</span>simple<span>&#46;</span>dallas<span>&#46;</span>tx<span>&#46;</span>us</a>&gt;</p>
<blockquote>
<ul class="simple">
<li>coders/webp.c (WriteWEBPImage): Patch by Przemysław Sobala to
support WebP 'use_sharp_yuv' option (&quot;if needed, use sharp (and
slow) RGB-&gt;YUV conversion&quot;) via <cite>-define webp:use-sharp-yuv=true</cite>.</li>
</ul>
</blockquote>
<p>2019-01-05  Bob Friesenhahn  &lt;<a class="reference external" href="mailto:bfriesen&#37;&#52;&#48;simple&#46;dallas&#46;tx&#46;us">bfriesen<span>&#64;</span>simple<span>&#46;</span>dallas<span>&#46;</span>tx<span>&#46;</span>us</a>&gt;</p>
<blockquote>
<ul class="simple">
<li>magick/pixel_cache.c (SetNexus): Merge IsNexusInCore()
implementation code into SetNexus() and add check for if
cache_info-&gt;pixels is null.  Fixes SourceForge issue #588 &quot;Bug in
IsNexusInCore()&quot;.</li>
<li>configure.ac (DcrawExtraOptions): Request TIFF output from dcraw
if build supports TIFF format in order to obtain more metadata.
This allows obtaining some metadata from standard TIFF tags
(e.g. camera make, model, and dcraw version), and any attached ICC
profile, but not specifically EXIF data since we don't support
extracting EXIF data from TIFF yet. Inspired by SourceForge issue
589 &quot;Identify lack of data (no Exif) in RAW formats&quot;.</li>
</ul>
</blockquote>
</div>
</body>
</html>
